{% extends 'admin/includes/base_admin.html' %}
{% load static %}

{% block title %}Peticiones{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/secciones_admin.css' %}">
{% endblock %}

{% block header_title %}PETICIONES{% endblock %}

{% block main_content %}
<div class="container">
    <!-- Estad√≠sticas -->
    <div class="stats-container">
        <div class="stat-card" onclick="filterByStatus('Pendiente')">
            <div class="stat-icon blue">üìÑ</div>
            <div class="stat-content">
                <strong id="stat-pendientes" class="stat-number">15</strong>
                <span class="stat-label">Peticiones Pendientes</span>
            </div>
        </div>
        <div class="stat-card" onclick="filterByStatus('En revisi√≥n')">
            <div class="stat-icon green">‚úì</div>
            <div class="stat-content">
                <strong id="stat-revision" class="stat-number">47</strong>
                <span class="stat-label">En Revisi√≥n</span>
            </div>
        </div>
        <div class="stat-card" onclick="filterByStatus('Aceptada')">
            <div class="stat-icon orange">‚úì</div>
            <div class="stat-content">
                <strong id="stat-aceptadas" class="stat-number">8</strong>
                <span class="stat-label">Aprobadas</span>
            </div>
        </div>
        <div class="stat-card" onclick="filterByStatus('Rechazada')">
            <div class="stat-icon red">‚úï</div>
            <div class="stat-content">
                <strong id="stat-rechazadas" class="stat-number">3</strong>
                <span class="stat-label">Rechazadas</span>
            </div>
        </div>
    </div>

    <!-- Filtros -->
    <div class="filters-section">
        <div class="filters-grid">
            <div class="filter-group">
                <label class="filter-label">N√∫mero de la petici√≥n</label>
                <input type="text" id="filter-petition" class="filter-input" placeholder="Ej: PET-001">
            </div>
            <div class="filter-group">
                <label class="filter-label">Usuario</label>
                <input type="text" id="filter-user" class="filter-input" placeholder="Nombre o correo electr√≥nico">
            </div>
            <div class="filter-group">
                <label class="filter-label">Estado de la petici√≥n</label>
                <select id="filter-status" class="filter-input">
                    <option value="">Todos los estados</option>
                    <option value="Pendiente">Pendiente</option>
                    <option value="En revisi√≥n">En revisi√≥n</option>
                    <option value="Aceptada">Aceptada</option>
                    <option value="Rechazada">Rechazada</option>
                    <option value="Respondida">Respondida</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label">Fecha desde</label>
                <input type="date" id="filter-date-from" class="filter-input">
            </div>
            <div class="filter-group">
                <label class="filter-label">Fecha hasta</label>
                <input type="date" id="filter-date-to" class="filter-input">
            </div>
        </div>
        <div class="filter-actions">
            <button class="btn btn-primary" id="btn-apply-filters">üîç Aplicar Filtros</button>
            <button class="btn btn-secondary" id="btn-clear-filters">üóëÔ∏è Limpiar Filtros</button>
        </div>
    </div>

    <div class="update-info" id="last-update">
        √öltima actualizaci√≥n: hace 2 minutos
    </div>

    <!-- Tabla -->
    <div class="table-container">
        <div class="table-header">
            <h2 class="table-title">Lista de Peticiones</h2>
            <span class="table-total">Total: <strong id="total-peticiones">73 peticiones</strong></span>
        </div>
        
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>ID Petici√≥n</th>
                        <th>Producto</th>
                        <th>Usuario</th>
                        <th>Cantidad</th>
                        <th>Fecha</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="petitions-tbody">
                    <!-- Se llenar√° din√°micamente con JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Paginaci√≥n -->
        <div class="pagination-container">
            <div class="pagination-info" id="pagination-info">Mostrando 5 de 73 peticiones</div>
            <div class="pagination" id="pagination"></div>
        </div>
    </div>
</div>

<!-- Modal -->
<div id="modal-details" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Detalles de la Petici√≥n</h2>
        <div id="modal-body"></div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/peticiones.js' %}"></script>
{% endblock %}
